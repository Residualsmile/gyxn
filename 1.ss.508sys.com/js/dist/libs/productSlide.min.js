!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("__JZ_UMD__",[],e):"object"==typeof exports?exports.__JZ_UMD__=e():(t.__JZ_UMD__=t.__JZ_UMD__||{},t.__JZ_UMD__["libs/productSlide"]=e())}(globalThis,(function(){return Site.productSlide={},function(t,e){var a,i,s,n,o,l,r,p,u,c,d,f,m=-1,h=null,g="",v="",b=82,_=!0;e.data={},e.dom={},e.cachePreviewImgList=[];var C=2052==Fai.top._lcid||1028==Fai.top._lcid;function P(){var t=[];return t.push('<div class="fk-slideForProduct" id="fk-productSlidePanel" style="display:none;">'),t.push('\t<div class="f-contentBg J_contentBg J_popup_bg"></div>'),t.push('\t<div class="f-content J_content J_webSite_slide" id="fk-productSlideContent">'),t.push('\t\t<div class="f-innerContent">'),function(t){t.push('<div class="f-multiContent J_multiContent">'),function(t){t.push('<div class="f-multiContent-left J_multiContentLeft">'),function(t){t.push('<div class="f-productPicContent J_productPicContent">'),t.push('\t<div class="f-productImg J_productImg">'),t.push('\t\t<div class="f-productImgLoading"></div>'),t.push("\t</div>"),t.push('\t<div class="f-productImgGroup J_productImgGroup" style="display:none;">'),t.push('\t\t<div class="f-productImgGroupBg"></div>'),t.push('\t\t<div class="f-imgListWrap J_imgListWrap">'),t.push("\t\t</div>"),t.push('\t\t<a href="javascript:;" onclick="return false;" class="f-groupLeft J_groupLeft" hidefocus="true">向左</a>'),t.push('\t\t<a href="javascript:;" onclick="return false;" class="f-groupRight J_groupRight" hidefocus="true">向右</a>'),t.push("\t</div>"),t.push("</div>"),t.push('<div class="f-shareContent J_shareContent">'),t.push("</div>")}(t),t.push("</div>"),t.push('<div class="f-multiContent-right J_multiContentRight">'),function(t){t.push('<div class="f-productDetailContent J_productDetailContent">'),t.push("</div>"),t.push('<div class="optionMsg"></div>'),t.push('<div class="f-productBuyContent J_productBuyContent">'),t.push("</div>")}(t),t.push("</div>")}(t),t.push("</div>"),t.push('<div class="f-albumsContent J_albumsContent">'),function(t){t.push('<div class="f-albumsWrap J_albumsWrap">'),t.push("</div>"),t.push('<a href="javascript:;" onclick="return false;" class="f-albumsLeft J_albumsLeft" hidefocus="true">向左</a>'),t.push('<a href="javascript:;" onclick="return false;" class="f-albumsRight J_albumsRight" hidefocus="true">向右</a>')}(t),t.push("</div>")}(t),t.push("\t\t</div>"),t.push('\t\t<a href="javascript:;" class="f-turnLeft J_turnLeft" onclick="return false;" hidefocus="true">向右</a>'),t.push('\t\t<a href="javascript:;" class="f-turnRight J_turnRight" onclick="return false;" hidefocus="true">向左</a>'),t.push('\t\t<a href="javascript:;" class="f-close J_close" onclick="return false;" title="关闭" hidefocus="true">关闭</a>'),t.push("\t</div>"),t.push("</div>"),t}function y(e){var a,i=!1;if(null==e)return i;for(var s=e.length,n=0;n<s;n++){var o=(a=e[n]).type,l=a.value||"";if(!(t.trim(l).length<1)&&11==o){i=!0;break}}return i}function w(){var a=e.dom;a.productDetailContent.empty(),a.productDetailContent.append(function(){if(!e.data.nowData)return"";var a,i,s,o,m,g,v,_,P=[],w=[],J=e.data,S=J.nowData,k=S.propList||[],x="undefined"!=typeof S.salePromotion?S.salePromotion:[],L="g_stress mallPriceBig f-mallPriceWrap",F="g_minor mallMarketPrice f-mallPriceWrap",D="",j="",R="",B="";f=l<100&&l>=.1||S.actualPrice!=S.mallPrice,p?("actualPrice"in S&&(r=S.actualPrice),l="discount"in S?S.discount:100,f=l<100&&l>=.1||S.actualPrice!=S.mallPrice,u=!!S.indepPrice):("actualPrice"in S&&(r=S.actualPrice),r=parseFloat(r)*l*.01),null==x&&x==[]||1==y(k)&&I(x,!1)&&(f=!1,w.push('<div class="fk-saleTime J_saleProTimeCount J_saleRemove">'),w.push("<table>"),w.push("<tr>"),w.push("<td>"),w.push('<div class="showSaleTimeImg fk-showSaleTimeImg">'),w.push("</div>"),w.push("</td>"),w.push('<td class="J_showSaleTimeClass fk-showSaleTimeStyle">'),w.push("</td>"),w.push("</tr>"),w.push("</table>"),w.push("</div>")),"undefined"!=typeof S.salePromotion&&(f=!1),a=S.name,v=k.length;for(g=0;g<v;g++)if(i=(_=k[g]).name,s=_.type,o=_.value||"",!(t.trim(o).length<1)){11==s&&f?(D=F,j=L):D=11!=s||f?12==s?F:"":L,11==s&&f?(R="",B="J_mallPriceClass"):R=11!=s||f?"":"J_mallPriceClass",w.push('<div class="f-propContent '+R+'">'),w.push('<div class="f-propName" title="'+i+'" style="width:'+b+'px">'+i+'<span class="f-colon">:</span></div>'),w.push('<div class="f-propValue '+D+'" style="color:'+Fai.top._majorColorData+'">');var T=n.siteCurrencyRight&&"￥"!=n.choiceCurrencyVal;if(11==s){if(T||w.push('\t<span class="f-currencyVal">'+n.choiceCurrencyVal+"</span>"),f){w.push('\t<span class="mallPrice J_realMallAmount">'+(C?o:Fai.formatPriceEn(o))+"</span>"),w.push("\t</div>"),w.push("</div>"),w.push('<div class="f-propContent '+B+'">'),w.push('<div class="f-propName" title="'+i+'" style="width:'+b+'px">'+c+'<span class="f-colon">:</span></div>'),w.push('<div class="f-propValue '+j+'">'),T||w.push('<span class="f-currencyVal">'+n.choiceCurrencyVal+"</span>");var W="";if(o.indexOf("~")>=0)if(u)W=r;else{var N=o.split("~"),O=parseFloat(N[0])*l*.01,A=parseFloat(N[1])*l*.01;W=O.toFixed(2)+"~"+A.toFixed(2)}else W=r,W=parseFloat(W).toFixed(2);w.push('<span class="f-mallPrice mallPrice" id="realMallAmount">'+(C?W:Fai.formatPriceEn(W))+"</span>"),w.push('<span class="fk-mallBuy-big memberPrice">'+(C?d:Fai.formatPriceEn(d))+"</span>"),T&&w.push('<span class="f-currencyVal">'+n.choiceCurrencyVal+"</span>")}else w.push('\t<span class="mallPrice J_realMallAmount" id="realMallAmount">'+(C?o:Fai.formatPriceEn(o))+"</span>");T&&w.push('\t<span class="f-currencyVal">'+n.choiceCurrencyVal+"</span>")}else 12==s?(T||w.push('<span class="f-currencyVal">'+n.choiceCurrencyVal+"</span>"),w.push('<span class="mallPrice">'+(C?o:Fai.formatPriceEn(o))+"</span>"),T&&w.push('<span class="f-currencyVal">'+n.choiceCurrencyVal+"</span>")):13==s?w.push('<span id="mallAmount">'+o+"</span>"):16==s?w.push('<span id="mallWeight">'+o+"</span>"+S.weightTypeStr):w.push(o);w.push("</div>"),w.push("</div>")}if((n.mallOpen||n.isJZShoppingOptionAllow)&&(n.mallShoppingOptions||n.isJZShoppingOptionOpen)&&"showOptionList"in S){var V=S.showOptionList||[],M=S.oldOptionsStr,U=!1,E=S.optionsAmountList||[],z=S.openPriceCalendar,H=V.length;f&&t.each(E,(function(t,e){e.oPrice=u?r:e.oPrice*l*.01}));for(var Z=0;Z<H;Z++){var q=V[Z],G=q.items,K=q.fieldKey,$=0;if(M)for(var X=M.split("_"),Y=0;Y<X.length;Y++)K==X[Y]?$=Y:1==q.t&&($=Y,U=!0);var Q=G.length,tt=Site.preprocessUrl({path:"",oldPath:""});if(Q>0){w.push('<div class="f-propContent f-optionContent">'),w.push('<div class="f-propName" title="" style="width:'+b+'px">'+Fai.encodeHtml(q.name)+'<span class="f-colon">:</span></div>'),w.push('<div class="propName" style="display:none;">'+Fai.encodeHtml(q.name)+"</div>"),w.push('<div class="f-optionValue" style="width:'+(318-b)+'px">'),w.push('<ul class="optionItemWrap J_optionItemWrap" data="'+q.fieldKey+'" type="'+q.type+'">');for(var et=0;et<Q;et++){var at=G[et],it=at.i,st=at.v,nt=at.path,ot=!1;if(E)for(var lt=0;lt<E.length;lt++){var rt,pt=E[lt],ut=pt.t2;rt="flag"in pt?pt.flag:1;var ct=ut.split("_");if(1==rt&&$<ct.length&&ct[$]==it){ot=!0;break}}if(ot){if(w.push('<li class="optionItem">'),nt){w.push('<span class="img-n">'+Fai.encodeHtml(st)+"</span>");var dt=at.orgPic;dt?w.push('<img class="i-img J-item J-item-img" src="'+nt+'" data="'+it+'" _fk-org="'+dt+'" faiWidth="'+at.faiWidth+'" faiHeight="'+at.faiHeight+'"/>'):w.push('<img class="i-img J-item J-item-img" src="'+nt+'" data="'+it+'"/>')}else w.push('<a class="J-item oItem" href="javascript:;" hidefocus="true" data="'+Fai.encodeHtmlAttr(it)+'">'),w.push("<span>"+Fai.encodeHtml(st)+"</span>"),w.push("</a>");w.push('</li">')}}w.push("</ul>"),w.push("</div>"),w.push("</div>")}U&&z&&(w.push('<div class="f-propContent f-optionContent">'),w.push('<div class="f-propName" title="" style="width:'+b+'px">'+Fai.encodeHtml(q.name)+'<span class="f-colon">:</span></div>'),w.push("<a hidefocus='true' class='priceCalendarOuter' href='"+tt+"pd.jsp?id="+J.id+"' target='_blank'>"),w.push("<div class='priceCalendarWrapper'><div class='priceCalendarTrigger'>请输入</div><span class='priceCalendarIcon'></span></div>"),w.push("<div class='priceCalendarBg'><div id='priceCalendar'></div></div>"),w.push("</a>"),w.push("</div>"))}e.data.isTimeOption=U&&z}if(P.push('<div class="f-productNameContent">'),P.push('\t<p class="f-productName">'),h.titleClick){m=e.data.nowData.productUrl;var ft=JZ.createUrlArgsOnclickStr(e.data.nowData.productUrlArg);P.push('<a class="f-productTitle" href="'+m+'" target="_blank" '+ft+">"),P.push(a),P.push("</a>")}else P.push(a);return P.push("\t</p>"),P.push("</div>"),P.push('<div class="f-underlineContent">'),P.push('<div class="f-underline"></div>'),P.push("</div>"),P.push('<div class="f-propListContent J_productProp">'),P.push(w.join("")),P.push("</div>"),P.join("")}()),a.productBuyContent.empty(),a.productBuyContent.append(function(){if((n.mallOpen||n.bookingOpen||n.isPayKnowProduct)&&!h.hiddenBuybtn){var t=[],a=e.data.isTimeOption,i=n.bookingInfo||"";if(n.bookingOpen&&!i.bookingBtnHidden){var s="",o="",l=Site.productSlide.data.nowData.productFromId;if(i.openProductForm&&0!=l){var r=e.data.nowData.id;s='onclick="Site.openProductFrom('.concat(l,", ").concat(r,');"')}else s='onclick="Site.showBookingPanel('.concat(Site.productSlide.data.id,",").concat(i.panelHeight,",").concat(i.panelWidth,')"'),o='<span class="bug-img fk-bookingIcon">&nbsp;</span>';var p="background-color:"+Fai.top._majorColorData+";";t.push('<div class="f-buyContent">'),e.data.nowData.isPayKnowProduct?t.push('\t<a style="'+p+'"href="'+e.data.nowData.productUrl+'" target="_blank" hidefocus="true" class="fk-mallBuy-big f-buyNow">'+o+"<span>"+Fai.encodeHtml(i.bookingBtnCusName?i.bookingNameStr:e.data.nowData.gloablKnowProductText)+"</span></a>"):a?t.push('\t<a style="'+p+'"href="'+e.data.nowData.productUrl+'" target="_blank" hidefocus="true" class="fk-mallBuy-big f-buyNow">'+o+"<span>"+Fai.encodeHtml(i.bookingNameStr)+"</span></a>"):t.push('\t<a style="'+p+'"href="javascript:;" '+s+' hidefocus="true" class="fk-mallBuy-big f-buyNow">'+o+"<span>"+Fai.encodeHtml(i.bookingNameStr)+"</span></a>"),t.push("</div>")}return t.join("")}}());var i=e.data.nowData;if(i){var s=i.optionsAmountList,o=i.relateAmount,m=i.mallPrice,g=i.productRestrictInfo,v=i.limitAmount_options,_=i.oldOptionsStr,P=i.limitAmount_mall,w={moduleId:"PdSlide",optionsAmountList:s||[],relateAmount:o,realMallPrice:m,limitAmount_options:v,productRestrictInfo:g,minAmount:i.minAmount,maxAmount:i.maxAmount,limitAmount_mall:P,oldOptionsStr:_};if(Site.productDetailInfo=w,Site.initProductRestrict(),n.mallShoppingOptions||n.isJZShoppingOptionOpen&&void 0!==s){_||(_="null");var J=i.salePromotion;void 0!==J&&(Site.salePromotionDetail.salePromotionParam=J),Site.initProductOptions(),Site.initOptionsStr()}}Fai.top._manageMode&&G()}function J(){var t=e.dom,a=e.data.nowData,i=t.multiContentRight,s=a.propList||[],o="undefined"!=typeof a.salePromotion?a.salePromotion:[],l="",r="";n.saleShowType=1,null!=o&&o!=[]&&1==y(s)&&(I(o,!0)||(i.find(".J_saleProTimeCount").remove(),l=o.beginTime,r=o.endTime,null!=l&&""!=l&&null!=r&&""!=r||k(o)))}function S(t,a,i,s){var o,l,r,p,u,c=e.dom.multiContentRight,d="",f=LS.salePromotionBegin,m=LS.salePromotionEnd,h=0;1==i?(d=f,h=t):(d=m,h=a),"2"==i&&k(s),clearInterval(n.saleCountTimeInterval),n.saleCountTimeInterval=setInterval((function(){o=parseInt(h/86400),l=parseInt(h/3600)-24*o,r=parseInt(h/60)-24*o*60-60*l,p=parseInt(h%60),h--,u=Fai.format(d,o,l,r,p),c.find(".J_showSaleTimeClass").html("&nbsp;&nbsp;"+u),h<0&&(1==i?(h=a,d=m,i=2,k(s)):(clearInterval(n.saleCountTimeInterval),c.find(".J_saleRemove").remove(),"1"==s.other.ruleData.s&&(c.find(".J_newMallPriceClass").find(".f-propValue").addClass("g_stress mallPriceBig"),c.find(".J_newMallPriceClass").find(".f-propValue").removeClass("g_minor mallMarketPrice"),c.find(".J_newMallPriceClass").find(".mallPrice").addClass("f-mallPrice"))))}),1e3)}function I(t,e){var a,i,s=!1,o=t.beginTime,l=t.endTime,r=(new Date).getTime()+n.timeDiff;return void 0===o||null==o||""==o||void 0===l||null==l||""==l||(a=new Date(o.replace(/-/g,"/")).getTime(),i=new Date(l.replace(/-/g,"/")).getTime(),(a>r||i>r)&&(s=!0),e&&(a>r?S(parseInt((a-r)/1e3),parseInt((i-a)/1e3),1,t):i>r&&S(parseInt((a-r)/1e3),parseInt((i-r)/1e3),2,t))),s}function k(a){if("1"==n.saleShowType){n.saleShowType=2;var i,s,o,l,r,p,u,c=[],d=[],f=e.dom.multiContentRight,m=[],h="";if(void 0!==a&&null!=a&&""!=a){var g=f.find(".J_mallPriceClass").find(".f-mallPrice").css("color");if(void 0!==g&&null!=g&&""!=g||(g="#cf0000"),"1"==a.saleType){l="",r=parseFloat(a.other.ruleData.d[0].m),p=t(".J_mallPriceClass").find(".f-propName").attr("title");var v=t(".J_mallPriceClass").find(".mallPrice").html();if(v.indexOf("~")>0){var _=v.split("~"),P=parseFloat(_[0]);isNaN(P)&&(P=0),m.push(P),P=parseFloat(_[1]),isNaN(P)&&(P=0),m.push(P)}else{var y=parseFloat(v);isNaN(y)&&(y=0),m.push(y)}for(var w=0;w<m.length;w++)u=0,"1"==a.other.ruleData.s?(l=2052==Fai.top._lcid||1028==Fai.top._lcid?Fai.format(LS.js_salePromotionDisCount,r):Fai.format(LS.js_salePromotionDisCount,Fai.formatPriceEn(10*(10-r),null,!0)),u=m[w]*(r/10)):(l=2052==Fai.top._lcid||1028==Fai.top._lcid?Fai.format(LS.salePromotionLapse,r):Fai.format(LS.salePromotionLapse,Fai.formatPriceEn(r,null,!0)),u=m[w]-r),(isNaN(u)||u<0)&&(u=0),w>0&&(h+="~"),h+=u.toFixed(2)+"";t(".J_mallPriceClass").find(".f-propValue").addClass("fk-saleRelative"),d.push('<div class="f-propContent J_newMallPriceClass">'),d.push('<div class="f-propName" title="'+p+'" style="width:'+b+'px">'+p+'<span class="f-colon">:</span></div>'),d.push('<div class="f-propValue g_minor mallMarketPrice f-mallPriceWrap">'),n.siteCurrencyRight&&"￥"!=!n.choiceCurrencyVal?(d.push('<span class="mallPrice">'+v+"</span>"),d.push('<span class="f-currencyVal">'+n.choiceCurrencyVal+"</span>")):(d.push('<span class="f-currencyVal">'+n.choiceCurrencyVal+"</span>"),d.push('<span class="mallPrice">'+v+"</span>")),d.push("</div>"),d.push("</div>"),t(".J_mallPriceClass").before(d.join("")),t(".J_mallPriceClass").find(".f-propName").html(LS.js_promotionPrice+"<span class='f-colon'>:</span>"),t(".J_mallPriceClass").find(".mallPrice").html(h),t(".J_mallPriceClass").find(".f-propName").attr("title",LS.js_promotionPrice),t(".J_mallPriceClass").addClass("J_saleRemove"),c.push('<span class="fk-saleTopSet fk-saleAbsolute"><table border="0" cellspacing="0" cellpadding="0"><tr>'),c.push('<td class="fk-saleTdSty1">'),c.push('<div  class="f-trangle " style="border-bottom: 5px solid '+g+';">'),c.push("</div>"),c.push("</td>"),c.push('<td class="fk-saleTdSty2">'),c.push('<div class="f-rect" style="background-color:'+g+';"  title="'+a.name+'">'),c.push(l),c.push("</div>"),c.push("</td>"),c.push("</tr></table></span>"),t(".J_mallPriceClass").find(".f-propValue").append(c.join(""))}else{s=20*(i=a.other.ruleData.d.length)+12*(i-1)+"px",c.push('<div class="f-propContent J_saleRemove">'),c.push('<div class="f-propName" title="'+LS.salePromotionName+'" style="height:'+s+";width:"+b+'px">'+LS.salePromotionName+'<span class="f-colon">:</span></div>'),c.push('<div class="f-propValue fk-saleRelative" style="height:'+s+'">'),c.push('<span class="saleHoverDefault fk-saleAbsolute" title="'+a.name+'">');for(var J=0;J<i;J++)o=0!=J?"top:"+30*J+"px":"top:0",c.push('<span class="fk-saleAbsolute" style="'+o+'">'),c.push('<span class="saleFullReBg" style="margin:0;background-color:'+g+';">'),c.push(Fai.format(LS.salePromotionOnlyFullReduce)),c.push("</span>"),c.push('<span style="margin:0;color:'+g+'">'),C?c.push("&nbsp;&nbsp;&nbsp;"+Fai.format(LS.js_salePromotionFullReduce,a.other.ruleData.d[J].m,a.other.ruleData.d[J].n)):c.push("&nbsp;&nbsp;&nbsp;"+Fai.format(LS.js_salePromotionFullReduce,Fai.formatPriceEn(a.other.ruleData.d[J].m,null,!0),Fai.formatPriceEn(a.other.ruleData.d[J].n,null,!0))),c.push("</span>"),c.push("</span>");c.push("</span>"),c.push("\t</div>"),c.push("</div>"),f.find(".J_mallPriceClass").after(c.join(""))}Site.showSalePromotionDl(),Fai.top._manageMode&&G()}}}function x(a){var s={};t.extend(s,{src:"",width:-1,height:-1},a),function(a){var s,n,o=e.dom.productImg,l=a.src||"",r=390,p=390,u=new Image,c=o.find(".J_nowImg");t.trim(l).length<1&&Fai.ing("找不到该图片",!0),c.length>0&&c.attr("src")==t.trim(l)||(o.empty().append('<div class="f-productImgLoading"></div>'),i&&i.onload&&(i.onload=function(){}),u.onload=function(){var t,a,i=!1,d=!1,f="",m=[],g=[];if(t=s=u.width,a=n=u.height,s>=n&&s>r?(i=!0,t=r):n>p&&(d=!0,a=p),i&&(f+="width:"+t+"px;"),d&&(f+="height:"+a+"px;"),i&&!d&&(a=r*u.height/u.width),!i&&d&&(t=p*u.width/u.height),h.picZoom||h.picPopupPD)g.push('\t<img class="J_nowImg " src="'+l+'" style="'+f+'" />');else{var v=JZ.createUrlArgsOnclickStr(e.data.nowData.productUrlArg);g.push('\t<a class="f-imgClick" href="'+e.data.nowData.productUrl+'" target="_blank" title="'+LS.toProductDetail+'" '+v+">"),g.push('\t\t<img class="J_nowImg " src="'+l+'" style="'+f+'" />'),g.push("\t</a>")}m.push('<table cellpadding="0" cellspacing="0" class="f-imgContainer">'),m.push("\t<tr>"),m.push("\t\t<td>"),m.push(g.join("")),m.push("\t\t</td>"),m.push("\t</tr>"),m.push("</table>"),h.picZoom&&((g=[]).push(m.join("")),(m=[]).push('<div class="cloud-zoom f-imgWrap" href="'+l+'">'),m.push(g.join("")),m.push("</div>")),o.empty(),o.append(m.join("")),h.picZoom&&((c=o.find(".cloud-zoom")).attr("rel","adjustX:-4, adjustY:-4, maxWidth:"+r+", maxHeight:"+p+',position:"inside"'),c.CloudZoom({imageHeight:n,imageWidth:s}),h.picPopupPD||setTimeout((function(){var t=JZ.createUrlArgsOnclickStr(e.data.nowData.productUrlArg);o.find(".mousetrap").append('<a href="'+e.data.nowData.productUrl+'" target="_blank" hidefocus="true" class="f-popupImgA" title="点击查看产品详情" '+t+"></a>")}),30))},i=u,setTimeout((function(){u.src=l}),50))}(s)}function L(){var t=e.data.nowData;t&&x({src:t.picPath,width:t.picwidth,height:t.picHeight})}function F(){var i=e.dom,s=e.data,n=i.groupBtn;n.left.removeClass("f-BtnDisabled f-BtnEnabled"),n.right.removeClass("f-BtnDisabled f-BtnEnabled"),i.imgListWrap.empty(),i.imgListWrap.append(function(t){var i,s,n,o,l=[],r=[],p=0,u=!1,c="",d="",f=0,m=0;for(t=e.data.id,o=a.length,n=0;n<o;n++)if(a[n].id==t){i=a[n],u=!0;break}if(!u)return"";for(o=(s=i.picPathList||[]).length,n=0;n<o;n++)c=s[n].thumbPath,d=s[n].path,f=s[n].picWidth,m=s[n].picHeight,r.push("<li>"),r.push('\t<a href="javascript:;" class="J_pic" onclick="return false;" path="'+d+'" picwidth="'+f+'" picheight="'+m+'" >'),r.push('\t\t<img src="'+c+'" style="display: block; width:60px; height:60px;" />'),r.push("\t</a>"),r.push("</li>"),p+=68;return l.push('\t\t\t<div class="f-imgListOuter J_imgListOuter">'),l.push('\t\t\t\t<ul class="f-imgList J_imgList" style="width:'+p+'px;" _num="0">'),l.push(r.join("")),l.push("\t\t\t\t</ul>"),l.push("\t\t\t</div>"),l.join("")}(s.id)),i.imgListOuter=i.imgListWrap.find(".J_imgListOuter"),i.imgList=i.imgListWrap.find(".J_imgList"),i.imgList.find(".J_pic").hover((function(){x({src:t(this).attr("path"),width:t(this).attr("picwidth"),height:t(this).attr("picheight")})}))}function D(){var i=e.dom;i.albumsWrap.empty(),i.albumsWrap.append(function(){var t,e,i,s=[],n=[],o=0;if(a&&a.length>0){for(var l=0,r=a.length;l<r;l++)e=(t=a[l]).picThumbPath||"",i=t.id,n.push("<li>"),n.push('\t<div class="f-albumsImgWrap J_albumsImgWrap J_albumsImgWrap'+i+'">'),n.push('\t\t<a href="javascript:;" onclick="return false;" class="f-albumsImg J_albumsImg J_albumsImg'+i+'" _id="'+i+'">'),n.push('\t\t\t<img data-src="'+e+'" class="f_albums_image" />'),n.push("\t\t</a>"),n.push('\t\t<div class="f-albumsImgTip"></div>'),n.push("\t</div>"),n.push("</li>"),o+=90;s.push('<div class="f-albumsOuter J_albumsOuter">'),s.push('\t<ul class="f-albums J_albums" style="width:'+o+'px;" _num="0">'),s.push(n.join("")),s.push("\t</ul>"),s.push("</div>")}return s.join("")}()),i.albumsOuter=i.albumsWrap.find(".J_albumsOuter"),i.albums=i.albumsWrap.find(".J_albums"),i.albumsImgWrap=i.albums.find(".J_albumsImgWrap"),i.albums.find(".J_albumsImg").click((function(){U(t(this).attr("_id"))})),N(),W({index:m,visibleNum:2}),function(){var a=e.dom,i=a.albums,s=a.albumsOuter,n=a.albumsBtn,o={content:i,contentOuter:s,button:n,scrollRow:!0},l={};t.extend(l,o,{scrollRow:!0}),O(l)}()}function j(){var t=e.dom,a=e.data;t.albumsImgWrap.removeClass("f-albumsImgWrap-selected"),t.albumsImgWrap.filter(".J_albumsImgWrap"+a.id).addClass("f-albumsImgWrap-selected")}function R(i){var s,n=e.dom,o=0,l={content:n.albums,contentOuter:n.albumsOuter,button:n.albumsBtn,scrollRow:!0,visibleNum:2},r={};t.extend(r,l,i),r.scrollRow?T(r):(o=function(t){var e,a,i=t.content,s=i.children(),n=s.length,o=0,l=m,r=t.direction,p=0,u=1,c=t.cycle||!1;if(e=n-n%u,r)if((a=l+u)<e)p=a;else if(l>e)p=0;else{if(e==n)return p=e-1,c&&(p=0),p;if(e==l)return p=e;p=e}else if((a=l-u)>o)p=a;else if(l<o)p=0;else if(p=o,o==l)return c&&(p=n-1),p;return p}(r),W({index:o,visibleNum:2}),m!=(s=o)&&a&&a[s]&&U(a[s].id)),O(r),t("#fk-productSlidePanel").find(".optionMsg").hide()}function B(a){var i=e.dom,s={content:i.imgList,contentOuter:i.imgListOuter,button:i.groupBtn,scrollRow:!0},n={};t.extend(n,s,a),T(n),O(n)}function T(t){var e=t.content,a=e.children(),i=a.length,s=a.first().outerWidth(),n=t.contentOuter.width(),o=parseInt(n/s),l=t.visibleNum||0,r=o-l,p=parseInt((i-l)/r),u=parseInt(e.attr("_num"))||0,c=0;if(i<=o?p=0:p*r-i>=0&&(p-=1),t.direction)if((c=u+1)>p)c=0,N(0),e.stop(!0).animate({left:"0"}),e.attr("_num",c);else{var d=-c*r*s;N(d),e.stop(!0).animate({left:d+"px"}),e.attr("_num",c)}else{(c=u-1)<0&&(c=p);var f=-c*r*s;N(f),e.stop(!0).animate({left:f+"px"}),e.attr("_num",c)}}function W(t){var a=e.dom,i=a.albums,s=i.children(),n=s.length,o=s.first().outerWidth(),l=a.albumsOuter.width(),r=parseInt(l/o),p=t.visibleNum||0,u=r-p,c=0,d=parseInt(i.attr("_num"))||0,f=0,m=0,h=t.index;if(p>parseInt(r/2)&&(u=r-(p=parseInt(r/2))),n>r&&h>=u?((c=parseInt((n-p)/u))*u-n>=0&&(c-=1),f=parseInt((h-p)/u),m=parseInt(h/u)):(c=0,f=0,m=0),f>c?f=0:f<0&&(f=c),d!=f&&d!=m){var g=-f*u*o;N(g),i.stop(!0).animate({left:g+"px"}),i.attr("_num",f)}}function N(t){for(var a=parseInt(t||0),i=e.dom.albums.children(),s=e.dom.albumsWrap.width(),n=i.eq(0).outerWidth(!0),o=parseInt(Math.abs(a)/n),l=o+Math.ceil(s/n),r=o;r<l;r++){var p=i.eq(r).find("img");p.length&&!p.attr("src")&&p.attr("src",p.attr("data-src"))}}function O(t){var e=t.content,a=e.children(),i=a.length,s=a.first().outerWidth(),n=t.contentOuter.width(),o=t.button,l=parseInt(n/s),r=t.visibleNum||0,p=l-r,u=parseInt((i-r)/p),c=parseInt(e.attr("_num"))||0;i<=l?u=0:u*p-i>=0&&(u-=1),c+1>u?o.right.addClass("f-BtnDisabled").removeClass("f-BtnEnabled"):o.right.addClass("f-BtnEnabled").removeClass("f-BtnDisabled"),c-1<0?o.left.addClass("f-BtnDisabled").removeClass("f-BtnEnabled"):o.left.addClass("f-BtnEnabled").removeClass("f-BtnDisabled")}function A(i){var s,r,u=[];u.push(i.qsUrl),u.push("&cmd=getWafNotCk_list&part=true"),t.ajax({type:"get",cache:!1,url:Site.addRequestPrefix({newPath:"/ajax/productSlide_h.jsp",oldPath:Site.genAjaxUrl("productSlide_h.jsp")})+u.join(""),error:function(){Fai.ing("服务繁忙，请稍候重试",!1)},success:function(i){var u=t.parseJSON(i),f=e.data;if(u.success){if(a=u.list.filter((function(t){return!t.isLinkProduct})),h=u.setInfo,n=u.data,v=n.css,l=n.levelDiscount,c=n.memberPrice,p=n.proIndepDisc,_=n.isLoadAllPdList,d=n.memberPriceLabel,b=h.prop2,Fai.top._manageMode&&(o=u.itemList),a.length<1)return void Fai.ing("没有产品信息");if(s=(new Date).getTime(),r=n.svrTimeLong,n.timeDiff=r-s,n.saleShowType=1,n.saleCountTimeInterval="",-1==n.productId?f.id=a[0].id:f.id=n.productId,-1==(m=M(f.id)))return void Fai.ing("没有该产品信息");f.nowData=a[m],function(){if(function(a){!Site.checkCssLoad(v)&&t.trim(v).length>0?Site.demandLoadCss(v,(function(){"function"==typeof a.func&&a.func.apply(e,arguments)})):"function"==typeof a.func&&a.func.apply(e,arguments)}({func:function(){var t=e.dom;t.panel&&t.panel.length>0?t.panel.is(":hidden")&&t.panel.show():Fai.top.$("#fk-productSlidePanel").show(),L(),w(),J(),F(),D(),V(),j(),setTimeout((function(){E()}),50)}}),Fai.top._manageMode&&o&&o.length>0){var a=e.dom.content;a.off("mousemove.productSlide").on("mousemove.productSlide",(function(){Site.addEditLayer("fk-productSlideContent",o,100,{extCls:"fk-productSlideEditLayer"})})),a.off("mouseleave.productSlide").on("mouseleave.productSlide",(function(){Site.removeEditLayer("fk-productSlideContent")}))}}()}else Fai.ing("获取数据失败",!1)}})}function V(){h.shareShow&&(e.dom.shareContent.addClass("f-shareContentIniting"),clearTimeout(s),s=setTimeout((function(){var a=[];a.push("cmd=getWafNotCk_share"),a.push("&id="+e.data.id),a.push("&browserTitle="+Fai.top.document.title),t.ajax({type:"post",url:Site.addRequestPrefix({newPath:"/ajax/productSlide_h.jsp",oldPath:Site.genAjaxUrl("productSlide_h.jsp")}),data:a.join(""),error:function(){Fai.ing("服务繁忙，请稍后重试",!1)},success:function(a){var i=t.parseJSON(a),s=e.dom,n="";i.success?n=i.content||"":Fai.ing("获取数据失败",!1),s.shareContent.removeClass("f-shareContentIniting"),s.shareContent.empty().append(n)}})}),300))}function M(t){var e,i,s=-1;if(a&&a.length>0)for(i=a.length,e=0;e<i;e++)if(a[e].id==t){s=e;break}return s}function U(i){var s,n=e.data;-1!=(s=M(i))?s!=m&&(m=s,n.id=parseInt(i),n.nowData=a[m],function(){if((m+50>a.length||m-50<0)&&!_){var e=[];e.push(g),e.push("&cmd=getWafNotCk_list&part=false"),t.ajax({type:"get",cache:!1,url:Site.addRequestPrefix({newPath:"/ajax/productSlide_h.jsp",oldPath:Site.genAjaxUrl("productSlide_h.jsp")}),data:e.join(""),error:function(){Fai.ing("服务繁忙，请稍候重试",!1)},success:function(e){var i=t.parseJSON(e);i.success&&(a=i.list,_=!0)}})}}(),e.dom.imgList=null,L(),w(),J(),F(),V(),j(),setTimeout((function(){E()}),50)):Fai.ing("没有该产品信息")}function E(){var t,a,i,s=e.data.nowData.picPathList||[];for(a=s.length,t=0;t<a;t++)i=s[t].path,(new Image).src=i}function z(){a=null,m=-1,i=null,s=null,n=null,h=null,l=null,r=null,u=null,p=null,c=null,d=null,f=!1,e.data={},b=82}function H(){var a,i=e.dom,s=i.panelBtn,n=i.groupBtn,o=i.albumsBtn;s.close.click((function(){q()})),s.left.click((function(){R({scrollRow:!1,direction:!1,cycle:!0,changeProduct:!0})})),s.right.click((function(){R({scrollRow:!1,direction:!0,cycle:!0,changeProduct:!0})})),o.left.click((function(){R({scrollRow:!0,direction:!1})})),o.right.click((function(){R({scrollRow:!0,direction:!0})})),n.left.click((function(){B({scrollRow:!0,direction:!1})})),n.right.click((function(){B({scrollRow:!0,direction:!0})})),i.contentBg.click((function(){q()})),i.productPicContent.hover((function(){if(i.imgList){var s=i.imgList.children();s&&s.length<2||(a=setTimeout((function(){i.productImgGroup.slideDown("normal",(function(){!function(){var a=e.dom,i={content:a.imgList,contentOuter:a.imgListOuter,button:a.groupBtn,scrollRow:!0},s={};t.extend(s,i,{scrollRow:!0}),O(s)}()}))}),250))}}),(function(){clearTimeout(a),i.productImgGroup.slideUp()})),i.content.mouseleave((function(){clearTimeout(a),i.productImgGroup.slideUp()}))}function Z(){var t=e.dom;Fai.top.$(".J_popup_bg").length>1&&t.contentBg.css("opacity",".15")}function q(){var t=e.dom;Fai.top._manageMode&&o&&Site.removeEditLayer("fk-productSlideContent"),t.panel&&t.panel.hide(),z(),e.dom={},e.cachePreviewImgList=[],g="",v="",o=null,Fai.top.$("#fk-productSlidePanel").remove()}function G(){var e;t(".f-propName").attr("class","f-propName paramResize"),(e=t(".f-propListContent ").find(".f-propContent").find(".paramResize")).length<1||e.each((function(){var e,a,i,s,n=t(this),o=Fai.isIE8()?t(document):t(window),l=t(this),r={};function p(e){e=e||window.event,r.x=e.pageX,t(this).hasClass("u-paramResize-w")?(r.dir="w",r.ptb=parseInt(l.css("width"))):t(this).hasClass("u-paramResize-e")&&(r.dir="e",r.ptb=parseInt(l.css("width"))),i=t("#dockTip").show().css({left:"-1000px;",top:"-1000px"}),o.off("mousemove.fi").on("mousemove.fi",u),o.off("mouseup.fi").on("mouseup.fi",c),e.preventDefault()}function u(e){t("body").css("cursor","e-resize"),t(".f-propName").css({"border-left":"1px dashed #2b73ba","border-right":"1px dashed #2b73ba","border-top":"1px solid #2b73ba","border-bottom":"1px solid #2b73ba"});var a,n,o={x:(e=e||window.event).pageX},l=1,p=200,u="";"w"==r.dir?(a=r.x-o.x,n=(n=(n=r.ptb+a)>l?n:l)>p?p:n,n=Math.round(n),u="宽度:"):"e"==r.dir&&(a=o.x-r.x,n=(n=(n=r.ptb+a)>l?n:l)>p?p:n,n=Math.round(n),u="宽度:"),s=n,t(".f-propName").css({width:n+"px"}),t(".f-optionValue").css({width:318-n+"px"}),t(".f-countValue").css({width:318-n+"px"}),i.html(u+n).css({left:e.pageX-28,top:e.pageY-40}),e.preventDefault()}function c(e){t("body").css("cursor",""),t(".f-propName").css("border","1px dashed transparent"),e=e||window.event,r.dir="",o.off("mousemove.fi"),o.off("mouseup.fi"),i.hide(),r={};var a="cmd=setWafCk_set&id="+h.id+"&style=19&prop0=1&prop2="+s,n=Site.addRequestPrefix({newPath:"/ajax/module_h.jsp",oldPath:Site.genAjaxUrl("module_h.jsp")});Fai.ing("正在保存……",!1),t.ajax({type:"post",url:n,data:a,error:function(){Fai.ing("服务繁忙，请稍候重试",!1)},success:function(e){var a=t.parseJSON(e);a.success?(Fai.ing("修改宽度成功",!0),b=s):(Fai.ing(a.msg,!1),t(".J_productDetailContent").find(".f-propContent").find(".paramResize").css("width",b))}}),e.preventDefault()}n.hasClass("paramResize")&&(n.before("<div class='u-paramResize-w' style='float:left' title='可拖动调节宽度'><div style='width:5px;height:"+t(n).outerHeight()+"px;z-index:999'></div></div>"),n.after("<div class='u-paramResize-e' style='float:left' title='可拖动调节宽度'><div style='width:5px;height:"+t(n).outerHeight()+"px;z-index:999'></div></div>"),t(".u-paramResize-e,.u-paramResize-w").css("cursor","e-resize")),e=t(n).prev(),(a=t(n).next()).hasClass("u-paramResize-e")&&e.hasClass("u-paramResize-w")&&(e.off("mousedown.fi").on("mousedown.fi",p),a.off("mousedown.fi").on("mousedown.fi",p))})),t(".f-propName,.u-paramResize-e,.u-paramResize-w").hover((function(){t(".f-propName").css({"border-left":"1px dashed #2b73ba","border-right":"1px dashed #2b73ba","border-top":"1px solid #2b73ba","border-bottom":"1px solid #2b73ba"})}),(function(){t(".f-propName").css("border","1px dashed transparent")}))}e.init=function(t){var a,i;q(),Fai.top.$("body").append(P().join("")),g=t,A({qsUrl:t}),a={eventFunc:H,styleFunc:Z},(i=e.dom).panel=Fai.top.$("#fk-productSlidePanel"),i.content=i.panel.find(".J_content"),i.contentBg=i.panel.find(".J_contentBg"),i.panelBtn={},i.panelBtn.left=i.panel.find(".J_turnLeft"),i.panelBtn.right=i.panel.find(".J_turnRight"),i.panelBtn.close=i.panel.find(".J_close"),i.multiContent=i.panel.find(".J_multiContent"),i.albumsContent=i.panel.find(".J_albumsContent"),i.multiContentLeft=i.multiContent.find(".J_multiContentLeft"),i.multiContentRight=i.multiContent.find(".J_multiContentRight"),i.productDetailContent=i.multiContentRight.find(".J_productDetailContent"),i.productBuyContent=i.multiContentRight.find(".J_productBuyContent"),i.shareContent=i.multiContentLeft.find(".J_shareContent"),i.productPicContent=i.multiContentLeft.find(".J_productPicContent"),i.productImg=i.multiContentLeft.find(".J_productImg"),i.productImgGroup=i.multiContentLeft.find(".J_productImgGroup"),i.imgListWrap=i.multiContentLeft.find(".J_imgListWrap"),i.groupBtn={},i.groupBtn.left=i.multiContentLeft.find(".J_groupLeft"),i.groupBtn.right=i.multiContentLeft.find(".J_groupRight"),i.albumsWrap=i.albumsContent.find(".J_albumsWrap"),i.albumsBtn={},i.albumsBtn.left=i.albumsContent.find(".J_albumsLeft"),i.albumsBtn.right=i.albumsContent.find(".J_albumsRight"),"function"==typeof a.eventFunc&&setTimeout((function(){a.eventFunc.apply(e,arguments)}),30),"function"==typeof a.styleFunc&&setTimeout((function(){a.styleFunc.apply(e,arguments)}),30)},e.refresh=function(){var t;(t=e.dom).productDetailContent.empty(),t.productBuyContent.empty(),t.productImg.empty(),t.imgListWrap.empty(),t.albumsWrap.empty(),t.shareContent.empty(),z(),A({qsUrl:g})}}(jQuery,Site.productSlide),{}}));